<script>
    // --- 1. Dust Particles (เหมือนเดิม) ---
    const dustContainer = document.getElementById('dust-container');
    const dustCount = 45; 
    for (let i = 0; i < dustCount; i++) {
        const dust = document.createElement('div');
        dust.className = 'particle';
        const size = Math.random() * 3 + 1 + 'px'; 
        dust.style.width = size; dust.style.height = size;
        dust.style.left = Math.random() * 100 + 'vw';
        dust.style.top = Math.random() * 100 + 'vh';
        const duration = Math.random() * 20 + 20;
        dust.style.animationDuration = duration + 's'; 
        dust.style.animationDelay = -(Math.random() * duration) + 's';
        dustContainer.appendChild(dust);
    }

    // --- 2. Questions (ฉบับปรับปรุงภาษา) ---
    const questions = [
        { q: "ในตอนนี้, คุณกำลังรู้สึกอะไรมากที่สุดในใจ" },
        { q: "ถ้าความรู้สึกที่เป็นอยู่ตอนนี้พูดได้, มันอยากจะบอกอะไรกับตัวคุณเองบ้าง" },
        { q: "วันนี้มีช่วงเวลาไหนบ้าง ที่คุณรู้สึกว่าเป็นตัวของตัวเองมากที่สุดจริงๆ" },
        { q: "มีความรู้สึกบางอย่างที่คุณกำลังพยายามจะหลีกเลี่ยงหรือเปล่า" },
        { q: "สมมติว่าคุณไม่จำเป็นต้องเก่ง ไม่ต้องเข้มแข็ง คุณอยากจะเป็นคนแบบไหน" },
        { q: "เวลาที่คุณต้องตัดสินใจเรื่องสำคัญ, คุณมักจะฟังเสียงของใครมากที่สุด" },
        { q: "มีการตัดสินใจเรื่องไหนบ้างไหม ที่ยังคงค้างคาอยู่ในใจคุณจนถึงตอนนี้" },
        { q: "ถ้าหากคุณตัดสินใจเพื่อตัวเองอย่างแท้จริง, ผลลัพธ์ในวันนี้อาจแตกต่างไปจากเดิมบ้างไหม" },
        { q: "อะไรคือสิ่งที่ทำให้คุณรู้สึกลังเล เวลาที่คุณจะต้องตัดสินใจเลือกบางสิ่ง" },
        { q: "ถ้าหากไม่มีใครต้องผิดหวัง, มีอะไรบ้างที่คุณอยากจะเลือกทำ" },
        { q: "เมื่อคุณอยู่ร่วมกับผู้อื่น, คุณรู้สึกเป็นตัวของตัวเองมากน้อยแค่ไหน" },
        { q: "มีใครบางคนในชีวิตที่คุณอยากจะบอกความจริงกับเขาหรือเธอไหม" },
        { q: "คุณรู้สึกสบายใจกับ 'ความเงียบ' ที่เกิดขึ้นในความสัมพันธ์ของคุณบ้างหรือเปล่า" },
        { q: "ในตอนนี้, คุณกำลังให้ความสำคัญกับความรู้สึกของใครเป็นพิเศษมากที่สุด" },
        { q: "คุณเคยรู้สึกไหมว่าต้องพยายามเป็นคนเดิม เพื่อให้ใครสักคนยังคงอยู่กับคุณ" },
        { q: "มีความคาดหวังบางอย่างที่คุณแบกรับไว้โดยไม่รู้ตัวบ้างไหม" },
        { q: "สิ่งที่คุณกำลังพยายามทำอยู่ตอนนี้, มันเป็นสิ่งที่คุณต้องการจริงๆ หรือเปล่า" },
        { q: "คุณกลัวอะไรมากที่สุด หากคุณเลือกที่จะแตกต่างไปจากคนอื่น" },
        { q: "ถ้าหากคุณไม่ต้องพิสูจน์อะไรกับใคร, ชีวิตของคุณจะรู้สึกเบาลงบ้างไหม" },
        { q: "มีอะไรบ้างที่คุณอยากจะปล่อยวาง แต่ก็ยังทำไม่ได้ในตอนนี้" },
        { q: "ครั้งสุดท้ายที่คุณใจดีและเมตตาต่อตัวเองคือเมื่อไหร่กันนะ" },
        { q: "เวลาที่คุณรู้สึกเหนื่อยล้า, คุณมักจะทำอะไรเป็นสิ่งแรกเสมอ" },
        { q: "ตอนนี้ร่างกายหรือจิตใจของคุณกำลังต้องการอะไรมากที่สุดกันนะ" },
        { q: "คุณอนุญาตให้ตัวเองได้พักผ่อน โดยไม่ต้องรู้สึกผิดบ้างไหม" },
        { q: "ถ้าคุณดูแลตัวเองเหมือนที่คุณดูแลคนที่คุณรัก, มันจะแตกต่างกันบ้างไหม" },
        { q: "ตอนนี้อะไรในชีวิตที่คุณอยากจะรักษาเอาไว้มากที่สุด" },
        { q: "มีอะไรเล็กๆ น้อยๆ ที่ทำให้คุณยังอยากตื่นขึ้นมาในทุกวันบ้างไหม" },
        { q: "ถ้าคุณไม่ต้องรีบร้อนทำอะไร, ชีวิตของคุณจะเป็นไปในจังหวะแบบไหน" },
        { q: "อนาคตแบบไหนที่คุณไม่อยากจะเสียความเป็นตัวเองไปเลย" },
        { q: "สำหรับวันนี้, คุณอยากจะขอบคุณตัวเองในเรื่องอะไรมากที่สุด" },
        { q: "เวลารู้สึกไม่โอเค เรามักเลือกอยู่กับมัน หรือพยายามหนีมัน และเพราะอะไร" },
        { q: "ถ้าวันนี้ไม่ต้องเก่ง ไม่ต้องดี เราอยากเป็นแบบไหน" }
    ];

    let currentIdx = 0;

    // --- 3. หน้าจอ (ฟังก์ชันเปลี่ยนหน้า) ---
    function nextScreen(screenId) {
        const currentActive = document.querySelector('.screen.active');
        if (currentActive) {
            currentActive.style.opacity = 0;
            currentActive.style.transform = "translateY(-20px)";
        }
        
        // ควบคุมการแสดงผลของกรอบรูป (Decoration)
        const decor = document.getElementById('decor-overlay');
        if (screenId === 'screen-intro' || screenId === 'screen-warning') {
            decor.classList.add('active');
        } else {
            decor.classList.remove('active');
        }

        setTimeout(() => {
            if (currentActive) currentActive.classList.remove('active');
            const next = document.getElementById(screenId);
            if (next) {
                next.classList.add('active');
                next.style.opacity = 1;
                next.style.transform = "translateY(0)";
                if(screenId === 'screen-quiz') showQuestion();
            }
        }, 600);
    }

    function showQuestion() {
        const q = questions[currentIdx];
        const qText = document.getElementById('question-text');
        
        qText.classList.remove('question-show');
        qText.classList.add('question-hide');

        setTimeout(() => {
            qText.innerText = q.q;
            qText.classList.remove('question-hide');
            qText.classList.add('question-show');
        }, 400);

        document.getElementById('answer-input').value = "";
        document.getElementById('progress').style.width = ((currentIdx + 1) / questions.length) * 100 + "%";
    }

    function nextQuestion() {
        if (currentIdx < questions.length - 1) {
            currentIdx++;
            showQuestion();
        } else {
            nextScreen('screen-end');
        }
    }

    // เริ่มต้นให้แสดง Decor ทันทีที่โหลดหน้าแรก
    window.onload = () => {
        document.getElementById('decor-overlay').classList.add('active');
    };
</script>
